(this["webpackJsonpweb3-demo"]=this["webpackJsonpweb3-demo"]||[]).push([[0],{109:function(e){e.exports=JSON.parse('{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERMIT_TYPEHASH","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account_","type":"address"},{"internalType":"uint256","name":"amount_","type":"uint256"}],"name":"_burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account_","type":"address"},{"internalType":"uint256","name":"amount_","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account_","type":"address"},{"internalType":"uint256","name":"amount_","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"vault_","type":"address"}],"name":"setVault","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner_","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}')},245:function(e,t,n){},271:function(e,t,n){},286:function(e,t){},288:function(e,t){},290:function(e,t){},294:function(e,t){},321:function(e,t){},323:function(e,t){},332:function(e,t){},334:function(e,t){},344:function(e,t){},346:function(e,t){},464:function(e,t){},466:function(e,t){},473:function(e,t){},474:function(e,t){},567:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(248),s=n.n(r),u=(n(271),n(50)),o=n(22),p=n(25),c=n.n(p),l=n(251),y=n.n(l),d=n(3),m=Object(a.createContext)({web3:null,setWeb3:function(){},connect:function(){},accounts:[],connected:!1}),b=function(e){var t=e.children,n=Object(a.useState)(null),i=Object(o.a)(n,2),r=i[0],s=i[1],p=Object(a.useState)([]),l=Object(o.a)(p,2),b=l[0],f=l[1],v=Object(a.useState)(!1),j=Object(o.a)(v,2),x=j[0],h=j[1];function T(){return(T=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new y.a(window.ethereum),h(!0),s(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){r&&(h(!0),r.eth.requestAccounts().then(f),r.currentProvider.isMetaMask&&(r.currentProvider.on("accountsChanged",(function(e){f(e)})),r.currentProvider.on("chainChanged",(function(e){window.location.reload()}))))}),[r]),Object(d.jsx)(m.Provider,{value:{web3:r,setWeb3:s,accounts:b,connect:function(){return T.apply(this,arguments)},connected:x},children:t})},f=n(602),v=n(257),j=n(614),x=(n(245),n(610)),h=n(609),T=n(606),w=n(611),O=n(612),M=n(613),g=n(77),C=n(109),k=function(e){var t=e.value,n=e.onClick,a=t?"squares ".concat(t):"squares";return Object(d.jsx)("button",{className:a,onClick:n,children:t})},I=function(e){var t=e.squares,n=e.onClick;return Object(d.jsx)("div",{className:"board",children:t.map((function(e,t){return Object(d.jsx)(k,{value:e,onClick:function(){return n(t)}},t)}))})},A=n(604),E=n(608),S=n(603),F="0xf229d63227280fCf73A84Ec295e18F403D795F2a",R=Object(S.a)({input:{border:"1px solid white",marginRight:"5px"}});var _,N=function(){var e=R(),t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],r=n[1],s=Object(a.useContext)(m),p=s.connect,l=s.accounts,y=s.web3;Object(a.useEffect)((function(){p()}),[]);var b=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i>0)){e.next=15;break}return t=new y.eth.Contract(C.abi,"0x24143E92dB1d4E483Fad326DD68A864Ca168Bcd7"),n=new y.eth.Contract(g.abi,F),e.prev=3,e.next=6,t.methods.approve(F,1e9*i).send({from:l[0]});case 6:return e.next=8,n.methods.createRoom().send({from:l[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0.message);case 13:e.next=16;break;case 15:window.alert("Deposit amount should be bigger than 0.");case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(x.a,{margin:3,display:"flex",justifyContent:"flex-end",children:[Object(d.jsxs)(x.a,{marginRight:5,children:[Object(d.jsx)(A.a,{placeholder:"Enter deposit amount",className:e.input,onChange:function(e){r(""===e.target.value?"":Number(e.target.value))}}),Object(d.jsx)(E.a,{onClick:b,color:"secondary",variant:"contained",className:"m-2",children:"Create a room"})]}),Object(d.jsx)(E.a,{onClick:p,color:"secondary",variant:"contained",className:"m-2",children:l.length>0?l[0].slice(0,6)+"..."+l[0].slice(l[0].length-3,l[0].length):"Connect to Wallet"})]})})},D="0xf229d63227280fCf73A84Ec295e18F403D795F2a";var L=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(null),s=Object(o.a)(r,2),p=s[0],l=s[1],y=Object(a.useState)([]),b=Object(o.a)(y,2),f=b[0],v=b[1],j=Object(a.useContext)(m),k=j.connect,A=j.accounts,E=j.web3,S=j.connected,F=function(e){return e?e.slice(0,6)+"..."+e.slice(e.length-3,e.length):""},R=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,a,r,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new E.eth.Contract(g.abi,D),e.prev=1,n=[],e.next=5,t.methods.roomCount().call();case 5:a=e.sent,r=0;case 7:if(!(r<a)){e.next=15;break}return e.next=10,t.methods.rooms(r).call();case 10:s=e.sent,n.push(s);case 12:r++,e.next=7;break;case 15:if(i(n),console.log("rooms: ",n),u=n.filter((function(e){return(e.player1.toLowerCase()===A[0].toLowerCase()||e.player2.toLowerCase()===A[0].toLowerCase())&&!1===e.end})),l(0===u.length?null:u[0]),!(u.length>0)){e.next=25;break}return e.next=22,t.methods.rowToString(u[0].id).call();case 22:o=(o=e.sent).split("|"),v(o);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),console.error(e.t0.message);case 30:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k()}),[]),Object(a.useEffect)((function(){S&&(_?(clearInterval(_),_=setInterval((function(){R()}),2e3)):_=setInterval((function(){R()}),2e3))}),[S,E,A]);var L=function(){var e=Object(u.a)(c.a.mark((function e(t){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==n[t].player1||0!=n[t].player2){e.next=15;break}return a=new E.eth.Contract(C.abi,"0x24143E92dB1d4E483Fad326DD68A864Ca168Bcd7"),i=new E.eth.Contract(g.abi,D),e.prev=3,e.next=6,a.methods.approve(D,n[t].stakes).send({from:A[0]});case 6:return e.next=8,i.methods.goToRoom(t).send({from:A[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0.message);case 13:e.next=16;break;case 15:window.alert("This room can't be gone into");case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new E.eth.Contract(g.abi,D),e.prev=1,e.next=4,n.methods.performMove(p.id,t).send({from:A[0]});case 4:return e.next=6,n.methods.isGameOver(p.id).call();case 6:if(!e.sent){e.next=12;break}return e.next=10,n.methods.withdraw(p.id).send({from:A[0]});case 10:return e.next=12,n.methods.endRoom(p.id).send({from:A[0]});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),0==n.filter((function(e){var t,n;return(e.player1.toLowerCase()===(null===(t=A[0])||void 0===t?void 0:t.toLowerCase())||e.player2.toLowerCase()===(null===(n=A[0])||void 0===n?void 0:n.toLowerCase()))&&!1===e.end})).length?Object(d.jsx)(x.a,{m:3,children:Object(d.jsx)(h.a,{container:!0,spacing:2,children:n.map((function(e,t){return Object(d.jsx)(h.a,{item:!0,xs:12,sm:6,md:3,children:Object(d.jsx)(T.a,{sx:{maxWidth:345},children:Object(d.jsx)(w.a,{onClick:function(){return L(t)},children:Object(d.jsxs)(O.a,{children:[Object(d.jsxs)(M.a,{gutterBottom:!0,variant:"h5",color:"text.secondary",children:["Room ",t+1]}),Object(d.jsxs)(M.a,{varfiant:"body2",color:"text.secondary",children:["player1: ",F(e.player1)]}),Object(d.jsxs)(M.a,{variant:"body2",color:"text.secondary",children:["player2: ",F(e.player2)]}),Object(d.jsxs)(M.a,{variant:"body2",color:"text.secondary",children:["stakes: ",(Number(e.stakes)/1e9).toFixed(3)," TIC"]}),Object(d.jsxs)(M.a,{variant:"body2",color:"text.secondary",children:["end status: ",e.end?"True":"False"]}),Object(d.jsxs)(M.a,{variant:"body2",color:"text.secondary",children:["Winner: ",F(e.winner)]})]})})})},t)}))})}):Object(d.jsxs)(x.a,{children:[Object(d.jsxs)(x.a,{display:"flex",justifyContent:"space-around",m:2,children:[Object(d.jsxs)(M.a,{children:["RoomId: ",p&&Number(null===p||void 0===p?void 0:p.id)+1]}),Object(d.jsxs)(M.a,{children:["player1: ",F(null===p||void 0===p?void 0:p.player1)]}),Object(d.jsxs)(M.a,{children:["player2: ",F(null===p||void 0===p?void 0:p.player2)]}),Object(d.jsxs)(M.a,{children:["stakes: ",p&&(Number(null===p||void 0===p?void 0:p.stakes)/1e9).toFixed(3)," TIC"]})]}),Object(d.jsx)(I,{squares:9===f.length?f:[],onClick:P})]})]})},P=Object(v.a)({palette:{background:{default:"#05182b"},text:{primary:"#ffffff"}}});var B=function(){return Object(d.jsx)(b,{children:Object(d.jsxs)(j.a,{theme:P,children:[Object(d.jsx)(f.a,{}),Object(d.jsx)(L,{})]})})};s.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root"))},77:function(e){e.exports=JSON.parse('{"abi":[{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"createRoom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"currentPlayerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"endRoom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"goToRoom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"isGameOver","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"uint8","name":"cellID","type":"uint8"}],"name":"performMove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"player1Address","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"player2Address","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"roomCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"rooms","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"player1","type":"address"},{"internalType":"address","name":"player2","type":"address"},{"internalType":"uint256","name":"stakes","type":"uint256"},{"internalType":"uint8","name":"current_move","type":"uint8"},{"internalType":"bool","name":"end","type":"bool"},{"internalType":"address","name":"winner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"rowToString","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"token","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"winner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')}},[[567,1,2]]]);
//# sourceMappingURL=main.b6638f35.chunk.js.map